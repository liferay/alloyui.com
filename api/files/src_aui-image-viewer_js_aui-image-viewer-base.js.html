<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>src/aui-image-viewer/js/aui-image-viewer-base.js - AlloyUI - API Docs</title>

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.ico">

    <!-- CSS -->
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">

    <!-- AlloyUI -->
    <link rel="stylesheet" href="http://cdn.alloyui.com/2.0.x/aui-css/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://cdn.alloyui.com/2.0.x/aui-css/css/bootstrap-responsive.min.css">
    <script src="http://cdn.alloyui.com/2.0.x/aui/aui-min.js"></script>

</head>
<body class="yui3-skin-sam">

    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <h1 class="brand">
                <a href="/">
                    <img alt="AlloyUI - API Docs" src="../assets/img/logo-small.png" title="AlloyUI - API Docs">
                </a>
            </h1>
            <div class="nav">
                <li class="divider-vertical"></li>
                <li>
                    <p class="navbar-text">
                        API Docs for Version: <b>2.0.0pr5</b>
                    </p>
                </li>
            </div>
        </div>
    </div>

    <div id="bd" class="container">
        <div class="row">
            <div class="span3">
                <div id="docs-sidebar" class="sidebar apidocs">
                    <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview">
        <ul class="nav nav-tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes tab-pane">
            
                <li><a href="../classes/A.AceEditor.html">A.AceEditor</a></li>
            
                <li><a href="../classes/A.Aria.html">A.Aria</a></li>
            
                <li><a href="../classes/A.ArraySort.html">A.ArraySort</a></li>
            
                <li><a href="../classes/A.Audio.html">A.Audio</a></li>
            
                <li><a href="../classes/A.AutoCompleteBase.html">A.AutoCompleteBase</a></li>
            
                <li><a href="../classes/A.AutoCompleteList.html">A.AutoCompleteList</a></li>
            
                <li><a href="../classes/A.AutosizeIframe.html">A.AutosizeIframe</a></li>
            
                <li><a href="../classes/A.AvailableField.html">A.AvailableField</a></li>
            
                <li><a href="../classes/A.BaseCellEditor.html">A.BaseCellEditor</a></li>
            
                <li><a href="../classes/A.BaseOptionsCellEditor.html">A.BaseOptionsCellEditor</a></li>
            
                <li><a href="../classes/A.Button.html">A.Button</a></li>
            
                <li><a href="../classes/A.ButtonCore.html">A.ButtonCore</a></li>
            
                <li><a href="../classes/A.ButtonGroup.html">A.ButtonGroup</a></li>
            
                <li><a href="../classes/A.Carousel.html">A.Carousel</a></li>
            
                <li><a href="../classes/A.CellEditorSupport.html">A.CellEditorSupport</a></li>
            
                <li><a href="../classes/A.CharCounter.html">A.CharCounter</a></li>
            
                <li><a href="../classes/A.CheckboxCellEditor.html">A.CheckboxCellEditor</a></li>
            
                <li><a href="../classes/A.ColorPalette.html">A.ColorPalette</a></li>
            
                <li><a href="../classes/A.ColorPickerBase.html">A.ColorPickerBase</a></li>
            
                <li><a href="../classes/A.ColorPickerPopover.html">A.ColorPickerPopover</a></li>
            
                <li><a href="../classes/A.Component.html">A.Component</a></li>
            
                <li><a href="../classes/A.Connector.html">A.Connector</a></li>
            
                <li><a href="../classes/A.DataTableHighlight.html">A.DataTableHighlight</a></li>
            
                <li><a href="../classes/A.DataTableSelection.html">A.DataTableSelection</a></li>
            
                <li><a href="../classes/A.DataType.DateMath.html">A.DataType.DateMath</a></li>
            
                <li><a href="../classes/A.DateCellEditor.html">A.DateCellEditor</a></li>
            
                <li><a href="../classes/A.DiagramBuilder.html">A.DiagramBuilder</a></li>
            
                <li><a href="../classes/A.DiagramBuilderBase.html">A.DiagramBuilderBase</a></li>
            
                <li><a href="../classes/A.DiagramNode.html">A.DiagramNode</a></li>
            
                <li><a href="../classes/A.DiagramNodeCondition.html">A.DiagramNodeCondition</a></li>
            
                <li><a href="../classes/A.DiagramNodeEnd.html">A.DiagramNodeEnd</a></li>
            
                <li><a href="../classes/A.DiagramNodeFork.html">A.DiagramNodeFork</a></li>
            
                <li><a href="../classes/A.DiagramNodeJoin.html">A.DiagramNodeJoin</a></li>
            
                <li><a href="../classes/A.DiagramNodeManagerBase.html">A.DiagramNodeManagerBase</a></li>
            
                <li><a href="../classes/A.DiagramNodeStart.html">A.DiagramNodeStart</a></li>
            
                <li><a href="../classes/A.DiagramNodeState.html">A.DiagramNodeState</a></li>
            
                <li><a href="../classes/A.DiagramNodeTask.html">A.DiagramNodeTask</a></li>
            
                <li><a href="../classes/A.DropDownCellEditor.html">A.DropDownCellEditor</a></li>
            
                <li><a href="../classes/A.FieldSupport.html">A.FieldSupport</a></li>
            
                <li><a href="../classes/A.FormBuilder.html">A.FormBuilder</a></li>
            
                <li><a href="../classes/A.FormBuilderAvailableField.html">A.FormBuilderAvailableField</a></li>
            
                <li><a href="../classes/A.FormBuilderButtonField.html">A.FormBuilderButtonField</a></li>
            
                <li><a href="../classes/A.FormBuilderCheckBoxField.html">A.FormBuilderCheckBoxField</a></li>
            
                <li><a href="../classes/A.FormBuilderField.html">A.FormBuilderField</a></li>
            
                <li><a href="../classes/A.FormBuilderFieldBase.html">A.FormBuilderFieldBase</a></li>
            
                <li><a href="../classes/A.FormBuilderFieldsetField.html">A.FormBuilderFieldsetField</a></li>
            
                <li><a href="../classes/A.FormBuilderFileUploadField.html">A.FormBuilderFileUploadField</a></li>
            
                <li><a href="../classes/A.FormBuilderMultipleChoiceField.html">A.FormBuilderMultipleChoiceField</a></li>
            
                <li><a href="../classes/A.FormBuilderRadioField.html">A.FormBuilderRadioField</a></li>
            
                <li><a href="../classes/A.FormBuilderSelectField.html">A.FormBuilderSelectField</a></li>
            
                <li><a href="../classes/A.FormBuilderTextAreaField.html">A.FormBuilderTextAreaField</a></li>
            
                <li><a href="../classes/A.FormBuilderTextField.html">A.FormBuilderTextField</a></li>
            
                <li><a href="../classes/A.FormValidator.html">A.FormValidator</a></li>
            
                <li><a href="../classes/A.Freemarker.html">A.Freemarker</a></li>
            
                <li><a href="../classes/A.HashMap.html">A.HashMap</a></li>
            
                <li><a href="../classes/A.HashSet.html">A.HashSet</a></li>
            
                <li><a href="../classes/A.HSVAPalette.html">A.HSVAPalette</a></li>
            
                <li><a href="../classes/A.HSVAPaletteModal.html">A.HSVAPaletteModal</a></li>
            
                <li><a href="../classes/A.HSVPalette.html">A.HSVPalette</a></li>
            
                <li><a href="../classes/A.HTML5.html">A.HTML5</a></li>
            
                <li><a href="../classes/A.ImageCropper.html">A.ImageCropper</a></li>
            
                <li><a href="../classes/A.ImageGallery.html">A.ImageGallery</a></li>
            
                <li><a href="../classes/A.ImageViewer.html">A.ImageViewer</a></li>
            
                <li><a href="../classes/A.io.html">A.io</a></li>
            
                <li><a href="../classes/A.IORequest.html">A.IORequest</a></li>
            
                <li><a href="../classes/A.LinkedSet.html">A.LinkedSet</a></li>
            
                <li><a href="../classes/A.MediaViewerPlugin.html">A.MediaViewerPlugin</a></li>
            
                <li><a href="../classes/A.Modal.html">A.Modal</a></li>
            
                <li><a href="../classes/A.Node.html">A.Node</a></li>
            
                <li><a href="../classes/A.NodeList.html">A.NodeList</a></li>
            
                <li><a href="../classes/A.OptionsEditor.html">A.OptionsEditor</a></li>
            
                <li><a href="../classes/A.Pagination.html">A.Pagination</a></li>
            
                <li><a href="../classes/A.Palette.html">A.Palette</a></li>
            
                <li><a href="../classes/A.ParseContent.html">A.ParseContent</a></li>
            
                <li><a href="../classes/A.ProgressBar.html">A.ProgressBar</a></li>
            
                <li><a href="../classes/A.PropertyList.html">A.PropertyList</a></li>
            
                <li><a href="../classes/A.RadioCellEditor.html">A.RadioCellEditor</a></li>
            
                <li><a href="../classes/A.Rating.html">A.Rating</a></li>
            
                <li><a href="../classes/A.SchedulerAgendaView.html">A.SchedulerAgendaView</a></li>
            
                <li><a href="../classes/A.SchedulerBase.html">A.SchedulerBase</a></li>
            
                <li><a href="../classes/A.SchedulerCalendar.html">A.SchedulerCalendar</a></li>
            
                <li><a href="../classes/A.SchedulerDayView.html">A.SchedulerDayView</a></li>
            
                <li><a href="../classes/A.SchedulerEvent.html">A.SchedulerEvent</a></li>
            
                <li><a href="../classes/A.SchedulerEventRecorder.html">A.SchedulerEventRecorder</a></li>
            
                <li><a href="../classes/A.SchedulerEvents.html">A.SchedulerEvents</a></li>
            
                <li><a href="../classes/A.SchedulerEventSupport.html">A.SchedulerEventSupport</a></li>
            
                <li><a href="../classes/A.SchedulerMonthView.html">A.SchedulerMonthView</a></li>
            
                <li><a href="../classes/A.SchedulerTableView.html">A.SchedulerTableView</a></li>
            
                <li><a href="../classes/A.SchedulerTableViewDD.html">A.SchedulerTableViewDD</a></li>
            
                <li><a href="../classes/A.SchedulerView.html">A.SchedulerView</a></li>
            
                <li><a href="../classes/A.SchedulerWeekView.html">A.SchedulerWeekView</a></li>
            
                <li><a href="../classes/A.Selector.html">A.Selector</a></li>
            
                <li><a href="../classes/A.SortableLayout.html">A.SortableLayout</a></li>
            
                <li><a href="../classes/A.SortableList.html">A.SortableList</a></li>
            
                <li><a href="../classes/A.Tab.html">A.Tab</a></li>
            
                <li><a href="../classes/A.TabView.html">A.TabView</a></li>
            
                <li><a href="../classes/A.TemplateProcessor.html">A.TemplateProcessor</a></li>
            
                <li><a href="../classes/A.TernarySearchNode.html">A.TernarySearchNode</a></li>
            
                <li><a href="../classes/A.TernarySearchTree.html">A.TernarySearchTree</a></li>
            
                <li><a href="../classes/A.TextAreaCellEditor.html">A.TextAreaCellEditor</a></li>
            
                <li><a href="../classes/A.TextCellEditor.html">A.TextCellEditor</a></li>
            
                <li><a href="../classes/A.ThumbRating.html">A.ThumbRating</a></li>
            
                <li><a href="../classes/A.ToggleButton.html">A.ToggleButton</a></li>
            
                <li><a href="../classes/A.Toggler.html">A.Toggler</a></li>
            
                <li><a href="../classes/A.TogglerDelegate.html">A.TogglerDelegate</a></li>
            
                <li><a href="../classes/A.Toolbar.html">A.Toolbar</a></li>
            
                <li><a href="../classes/A.ToolbarRenderer.html">A.ToolbarRenderer</a></li>
            
                <li><a href="../classes/A.TooltipDelegate.html">A.TooltipDelegate</a></li>
            
                <li><a href="../classes/A.TreeData.html">A.TreeData</a></li>
            
                <li><a href="../classes/A.TreeNode.html">A.TreeNode</a></li>
            
                <li><a href="../classes/A.TreeNodeCheck.html">A.TreeNodeCheck</a></li>
            
                <li><a href="../classes/A.TreeNodeIO.html">A.TreeNodeIO</a></li>
            
                <li><a href="../classes/A.TreeNodeRadio.html">A.TreeNodeRadio</a></li>
            
                <li><a href="../classes/A.TreeNodeTask.html">A.TreeNodeTask</a></li>
            
                <li><a href="../classes/A.TreeView.html">A.TreeView</a></li>
            
                <li><a href="../classes/A.TreeViewDD.html">A.TreeViewDD</a></li>
            
                <li><a href="../classes/A.TreeViewIO.html">A.TreeViewIO</a></li>
            
                <li><a href="../classes/A.TreeViewPaginator.html">A.TreeViewPaginator</a></li>
            
                <li><a href="../classes/A.Url.html">A.Url</a></li>
            
                <li><a href="../classes/A.Velocity.html">A.Velocity</a></li>
            
                <li><a href="../classes/A.Video.html">A.Video</a></li>
            
                <li><a href="../classes/A.WidgetCssClass.html">A.WidgetCssClass</a></li>
            
                <li><a href="../classes/A.WidgetPositionAlignSuggestion.html">A.WidgetPositionAlignSuggestion</a></li>
            
                <li><a href="../classes/A.WidgetToggle.html">A.WidgetToggle</a></li>
            
                <li><a href="../classes/A.WidgetTrigger.html">A.WidgetTrigger</a></li>
            
                <li><a href="../classes/ButtonExt.html">ButtonExt</a></li>
            
                <li><a href="../classes/DataType.Boolean.html">DataType.Boolean</a></li>
            
                <li><a href="../classes/DataType.Date.Locale.html">DataType.Date.Locale</a></li>
            
                <li><a href="../classes/DataType.String.html">DataType.String</a></li>
            
                <li><a href="../classes/Node.html">Node</a></li>
            
                <li><a href="../classes/Popover.html">Popover</a></li>
            
                <li><a href="../classes/Tooltip.html">Tooltip</a></li>
            
                <li><a href="../classes/TreeNode.html">TreeNode</a></li>
            
                <li><a href="../classes/WidgetToolbars.html">WidgetToolbars</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules tab-pane">
            
                <li><a href="../modules/aui-ace-autocomplete-base.html">aui-ace-autocomplete-base</a></li>
            
                <li><a href="../modules/aui-ace-autocomplete-freemarker.html">aui-ace-autocomplete-freemarker</a></li>
            
                <li><a href="../modules/aui-ace-autocomplete-list.html">aui-ace-autocomplete-list</a></li>
            
                <li><a href="../modules/aui-ace-autocomplete-templateprocessor.html">aui-ace-autocomplete-templateprocessor</a></li>
            
                <li><a href="../modules/aui-ace-autocomplete-velocity.html">aui-ace-autocomplete-velocity</a></li>
            
                <li><a href="../modules/aui-ace-editor.html">aui-ace-editor</a></li>
            
                <li><a href="../modules/aui-aria.html">aui-aria</a></li>
            
                <li><a href="../modules/aui-arraysort.html">aui-arraysort</a></li>
            
                <li><a href="../modules/aui-audio.html">aui-audio</a></li>
            
                <li><a href="../modules/aui-autosize-iframe.html">aui-autosize-iframe</a></li>
            
                <li><a href="../modules/aui-button.html">aui-button</a></li>
            
                <li><a href="../modules/aui-carousel.html">aui-carousel</a></li>
            
                <li><a href="../modules/aui-char-counter.html">aui-char-counter</a></li>
            
                <li><a href="../modules/aui-collection.html">aui-collection</a></li>
            
                <li><a href="../modules/aui-color-pallete.html">aui-color-pallete</a></li>
            
                <li><a href="../modules/aui-color-picker.html">aui-color-picker</a></li>
            
                <li><a href="../modules/aui-color-picker-base.html">aui-color-picker-base</a></li>
            
                <li><a href="../modules/aui-color-picker-popover.html">aui-color-picker-popover</a></li>
            
                <li><a href="../modules/aui-component.html">aui-component</a></li>
            
                <li><a href="../modules/aui-datatable.html">aui-datatable</a></li>
            
                <li><a href="../modules/aui-datatable-edit.html">aui-datatable-edit</a></li>
            
                <li><a href="../modules/aui-datatable-highlight.html">aui-datatable-highlight</a></li>
            
                <li><a href="../modules/aui-datatable-property-list.html">aui-datatable-property-list</a></li>
            
                <li><a href="../modules/aui-datatable-selection.html">aui-datatable-selection</a></li>
            
                <li><a href="../modules/aui-datatype.html">aui-datatype</a></li>
            
                <li><a href="../modules/aui-diagram-builder.html">aui-diagram-builder</a></li>
            
                <li><a href="../modules/aui-diagram-builder-base.html">aui-diagram-builder-base</a></li>
            
                <li><a href="../modules/aui-diagram-builder-connector.html">aui-diagram-builder-connector</a></li>
            
                <li><a href="../modules/aui-diagram-builder-impl.html">aui-diagram-builder-impl</a></li>
            
                <li><a href="../modules/aui-event.html">aui-event</a></li>
            
                <li><a href="../modules/aui-event-base.html">aui-event-base</a></li>
            
                <li><a href="../modules/aui-event-delegate-change.html">aui-event-delegate-change</a></li>
            
                <li><a href="../modules/aui-event-delegate-submit.html">aui-event-delegate-submit</a></li>
            
                <li><a href="../modules/aui-event-input.html">aui-event-input</a></li>
            
                <li><a href="../modules/aui-form-builder.html">aui-form-builder</a></li>
            
                <li><a href="../modules/aui-form-builder-base.html">aui-form-builder-base</a></li>
            
                <li><a href="../modules/aui-form-builder-field-base.html">aui-form-builder-field-base</a></li>
            
                <li><a href="../modules/aui-form-builder-field-button.html">aui-form-builder-field-button</a></li>
            
                <li><a href="../modules/aui-form-builder-field-checkbox.html">aui-form-builder-field-checkbox</a></li>
            
                <li><a href="../modules/aui-form-builder-field-fieldset.html">aui-form-builder-field-fieldset</a></li>
            
                <li><a href="../modules/aui-form-builder-field-multiple-choice.html">aui-form-builder-field-multiple-choice</a></li>
            
                <li><a href="../modules/aui-form-builder-field-radio.html">aui-form-builder-field-radio</a></li>
            
                <li><a href="../modules/aui-form-builder-field-select.html">aui-form-builder-field-select</a></li>
            
                <li><a href="../modules/aui-form-builder-field-text.html">aui-form-builder-field-text</a></li>
            
                <li><a href="../modules/aui-form-builder-field-textarea.html">aui-form-builder-field-textarea</a></li>
            
                <li><a href="../modules/aui-form-builder-field-upload.html">aui-form-builder-field-upload</a></li>
            
                <li><a href="../modules/aui-form-validator.html">aui-form-validator</a></li>
            
                <li><a href="../modules/aui-hsv-palette.html">aui-hsv-palette</a></li>
            
                <li><a href="../modules/aui-hsv-palette-modal.html">aui-hsv-palette-modal</a></li>
            
                <li><a href="../modules/aui-hsva-palette.html">aui-hsva-palette</a></li>
            
                <li><a href="../modules/aui-image-cropper.html">aui-image-cropper</a></li>
            
                <li><a href="../modules/aui-image-viewer.html">aui-image-viewer</a></li>
            
                <li><a href="../modules/aui-image-viewer-base.html">aui-image-viewer-base</a></li>
            
                <li><a href="../modules/aui-image-viewer-gallery.html">aui-image-viewer-gallery</a></li>
            
                <li><a href="../modules/aui-io.html">aui-io</a></li>
            
                <li><a href="../modules/aui-io-request.html">aui-io-request</a></li>
            
                <li><a href="../modules/aui-linkedset.html">aui-linkedset</a></li>
            
                <li><a href="../modules/aui-map.html">aui-map</a></li>
            
                <li><a href="../modules/aui-media-viewer-plugin.html">aui-media-viewer-plugin</a></li>
            
                <li><a href="../modules/aui-modal.html">aui-modal</a></li>
            
                <li><a href="../modules/aui-node.html">aui-node</a></li>
            
                <li><a href="../modules/aui-node-base.html">aui-node-base</a></li>
            
                <li><a href="../modules/aui-node-html5.html">aui-node-html5</a></li>
            
                <li><a href="../modules/aui-node-html5-print.html">aui-node-html5-print</a></li>
            
                <li><a href="../modules/aui-pagination.html">aui-pagination</a></li>
            
                <li><a href="../modules/aui-pallete.html">aui-pallete</a></li>
            
                <li><a href="../modules/aui-parse-content.html">aui-parse-content</a></li>
            
                <li><a href="../modules/aui-popover.html">aui-popover</a></li>
            
                <li><a href="../modules/aui-progressbar.html">aui-progressbar</a></li>
            
                <li><a href="../modules/aui-rating.html">aui-rating</a></li>
            
                <li><a href="../modules/aui-scheduler.html">aui-scheduler</a></li>
            
                <li><a href="../modules/aui-scheduler-base.html">aui-scheduler-base</a></li>
            
                <li><a href="../modules/aui-scheduler-base-calendar.html">aui-scheduler-base-calendar</a></li>
            
                <li><a href="../modules/aui-scheduler-base-event.html">aui-scheduler-base-event</a></li>
            
                <li><a href="../modules/aui-scheduler-base-view.html">aui-scheduler-base-view</a></li>
            
                <li><a href="../modules/aui-scheduler-event-recorder.html">aui-scheduler-event-recorder</a></li>
            
                <li><a href="../modules/aui-scheduler-view-agenda.html">aui-scheduler-view-agenda</a></li>
            
                <li><a href="../modules/aui-scheduler-view-day.html">aui-scheduler-view-day</a></li>
            
                <li><a href="../modules/aui-scheduler-view-month.html">aui-scheduler-view-month</a></li>
            
                <li><a href="../modules/aui-scheduler-view-table.html">aui-scheduler-view-table</a></li>
            
                <li><a href="../modules/aui-scheduler-view-table-dd.html">aui-scheduler-view-table-dd</a></li>
            
                <li><a href="../modules/aui-scheduler-view-week.html">aui-scheduler-view-week</a></li>
            
                <li><a href="../modules/aui-search.html">aui-search</a></li>
            
                <li><a href="../modules/aui-search-ternary-search-node.html">aui-search-ternary-search-node</a></li>
            
                <li><a href="../modules/aui-search-ternary-search-tree.html">aui-search-ternary-search-tree</a></li>
            
                <li><a href="../modules/aui-selector.html">aui-selector</a></li>
            
                <li><a href="../modules/aui-set.html">aui-set</a></li>
            
                <li><a href="../modules/aui-sortable-layout.html">aui-sortable-layout</a></li>
            
                <li><a href="../modules/aui-sortable-list.html">aui-sortable-list</a></li>
            
                <li><a href="../modules/aui-tabview.html">aui-tabview</a></li>
            
                <li><a href="../modules/aui-text.html">aui-text</a></li>
            
                <li><a href="../modules/aui-timer.html">aui-timer</a></li>
            
                <li><a href="../modules/aui-toggler.html">aui-toggler</a></li>
            
                <li><a href="../modules/aui-toolbar.html">aui-toolbar</a></li>
            
                <li><a href="../modules/aui-tooltip.html">aui-tooltip</a></li>
            
                <li><a href="../modules/aui-tree.html">aui-tree</a></li>
            
                <li><a href="../modules/aui-tree-data.html">aui-tree-data</a></li>
            
                <li><a href="../modules/aui-tree-io.html">aui-tree-io</a></li>
            
                <li><a href="../modules/aui-tree-node.html">aui-tree-node</a></li>
            
                <li><a href="../modules/aui-tree-paginator.html">aui-tree-paginator</a></li>
            
                <li><a href="../modules/aui-tree-view.html">aui-tree-view</a></li>
            
                <li><a href="../modules/aui-url.html">aui-url</a></li>
            
                <li><a href="../modules/aui-video.html">aui-video</a></li>
            
                <li><a href="../modules/aui-widget-cssclass.html">aui-widget-cssclass</a></li>
            
                <li><a href="../modules/aui-widget-toggle.html">aui-widget-toggle</a></li>
            
                <li><a href="../modules/aui-widget-toolbars.html">aui-widget-toolbars</a></li>
            
                <li><a href="../modules/datatype.html">datatype</a></li>
            
                <li><a href="../modules/loader.html">loader</a></li>
            
                <li><a href="../modules/loader-yui3.html">loader-yui3</a></li>
            
            </ul>
        </div>
    </div>
</div>

                </div>
            </div>
            <div class="span9">
                    <div id="api-options" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


                <div class="apidocs">
                    <div id="docs-main">
                        <div class="content">
                            <div class="page-header">
  <h1><small>File</small> <code>src/aui-image-viewer/js/aui-image-viewer-base.js</code></h1>
</div>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * The ImageViewer Utility
 *
 * @module aui-image-viewer
 * @submodule aui-image-viewer-base
 */

var L = A.Lang,
	isBoolean = L.isBoolean,
	isNumber = L.isNumber,
	isObject = L.isObject,
	isString = L.isString,

	NodeFx = A.Plugin.NodeFX,

	DOC = A.config.doc,

	ANIM = &#x27;anim&#x27;,
	AUTO = &#x27;auto&#x27;,
	BD = &#x27;bd&#x27;,
	BLANK = &#x27;blank&#x27;,
	BODY = &#x27;body&#x27;,
	BOUNDING_BOX = &#x27;boundingBox&#x27;,
	CAPTION = &#x27;caption&#x27;,
	CAPTION_EL = &#x27;captionEl&#x27;,
	CAPTION_FROM_TITLE = &#x27;captionFromTitle&#x27;,
	CAROUSEL = &#x27;carousel&#x27;,
	CENTERED = &#x27;centered&#x27;,
	CLOSE = &#x27;close&#x27;,
	CLOSE_EL = &#x27;closeEl&#x27;,
	CONTROL = &#x27;control&#x27;,
	CONTROL_LEFT_EL = &#x27;controlLeftEl&#x27;,
	CONTROL_RIGHT_EL = &#x27;controlRightEl&#x27;,
	CREATE_DOCUMENT_FRAGMENT = &#x27;createDocumentFragment&#x27;,
	CURRENT_INDEX = &#x27;currentIndex&#x27;,
	EASE_BOTH_STRONG = &#x27;easeBothStrong&#x27;,
	FOOTER = &#x27;footer&#x27;,
	HELPER = &#x27;helper&#x27;,
	HIDDEN = &#x27;hidden&#x27;,
	HIDE = &#x27;hide&#x27;,
	HREF = &#x27;href&#x27;,
	ICON = &#x27;icon&#x27;,
	IMAGE = &#x27;image&#x27;,
	IMAGE_ANIM = &#x27;imageAnim&#x27;,
	IMAGE_VIEWER = &#x27;image-viewer&#x27;,
	INFO = &#x27;info&#x27;,
	INFO_EL = &#x27;infoEl&#x27;,
	INFO_TEMPLATE = &#x27;infoTemplate&#x27;,
	LEFT = &#x27;left&#x27;,
	LINK = &#x27;link&#x27;,
	LINKS = &#x27;links&#x27;,
	LOADER = &#x27;loader&#x27;,
	LOADING = &#x27;loading&#x27;,
	LOADING_EL = &#x27;loadingEl&#x27;,
	LOCK = &#x27;lock&#x27;,
	MAX_HEIGHT = &#x27;maxHeight&#x27;,
	MAX_WIDTH = &#x27;maxWidth&#x27;,
	MODAL = &#x27;modal&#x27;,
	OFFSET_HEIGHT = &#x27;offsetHeight&#x27;,
	OFFSET_WIDTH = &#x27;offsetWidth&#x27;,
	OPACITY = &#x27;opacity&#x27;,
	OVERLAY = &#x27;overlay&#x27;,
	PRELOAD_ALL_IMAGES = &#x27;preloadAllImages&#x27;,
	PRELOAD_NEIGHBOR_IMAGES = &#x27;preloadNeighborImages&#x27;,
	PX = &#x27;px&#x27;,
	REGION = &#x27;region&#x27;,
	RIGHT = &#x27;right&#x27;,
	SCROLL = &#x27;scroll&#x27;,
	SHOW = &#x27;show&#x27;,
	SHOW_CLOSE = &#x27;showClose&#x27;,
	SHOW_CONTROLS = &#x27;showControls&#x27;,
	SPACE = &#x27; &#x27;,
	SRC = &#x27;src&#x27;,
	TIME = &#x27;time&#x27;,
	TITLE = &#x27;title&#x27;,
	TOP = &#x27;top&#x27;,
	TOTAL_LINKS = &#x27;totalLinks&#x27;,
	VIEWPORT_REGION = &#x27;viewportRegion&#x27;,
	VISIBLE = &#x27;visible&#x27;,
	WELL = &#x27;well&#x27;,
	OWNER_DOCUMENT = &#x27;ownerDocument&#x27;,

	isNodeList = function(v) {
		return (v instanceof A.NodeList);
	},

	concat = function() {
		return Array.prototype.slice.call(arguments).join(SPACE);
	},

	getCN = A.getClassName,

	CSS_CAROUSEL_CONTROL = getCN(CAROUSEL, CONTROL),
	CSS_CLOSE = getCN(CLOSE),
	CSS_HELPER_SCROLL_LOCK = getCN(HELPER, SCROLL, LOCK),
	CSS_HIDE = getCN(HIDE),
	CSS_ICON_TIME = getCN(ICON, TIME),
	CSS_IMAGE_VIEWER_BD = getCN(IMAGE_VIEWER, BD),
	CSS_IMAGE_VIEWER_CAPTION = getCN(IMAGE_VIEWER, CAPTION),
	CSS_IMAGE_VIEWER_CLOSE = getCN(IMAGE_VIEWER, CLOSE),
	CSS_IMAGE_VIEWER_CONTROL = getCN(IMAGE_VIEWER, CONTROL),
	CSS_IMAGE_VIEWER_IMAGE = getCN(IMAGE_VIEWER, IMAGE),
	CSS_IMAGE_VIEWER_INFO = getCN(IMAGE_VIEWER, INFO),
	CSS_IMAGE_VIEWER_LINK = getCN(IMAGE_VIEWER, LINK),
	CSS_IMAGE_VIEWER_LOADER = getCN(IMAGE_VIEWER, LOADER),
	CSS_IMAGE_VIEWER_LOADING = getCN(IMAGE_VIEWER, LOADING),
	CSS_LEFT = getCN(LEFT),
	CSS_RIGHT = getCN(RIGHT),
	CSS_WELL = getCN(WELL),

	KEY_ESC = &#x27;ESC&#x27;,
	KEY_LEFT = &#x27;LEFT&#x27;,
	KEY_RIGHT = &#x27;RIGHT&#x27;,

	MAP_RESET_DIMENSIONS = {
		height: AUTO,
		width: AUTO
	},

	NODE_BLANK_TEXT = DOC.createTextNode(&#x27;&#x27;),

	INFO_LABEL_TEMPLATE = &#x27;Image {current} of {total}&#x27;,

	TPL_CAPTION = &#x27;&lt;h4 class=&quot;&#x27; + CSS_IMAGE_VIEWER_CAPTION + &#x27;&quot;&gt;&lt;/h4&gt;&#x27;,
	TPL_CLOSE = &#x27;&lt;button class=&quot;&#x27;+ concat(CSS_IMAGE_VIEWER_CLOSE, CSS_CLOSE) +&#x27;&quot; type=&quot;button&quot;&gt;Ã—&lt;/button&gt;&#x27;,
	TPL_CONTROL_LEFT = &#x27;&lt;a href=&quot;#&quot; class=&quot;&#x27;+ concat(CSS_IMAGE_VIEWER_CONTROL, CSS_CAROUSEL_CONTROL, CSS_LEFT) +&#x27;&quot;&gt;&amp;lsaquo;&lt;/a&gt;&#x27;,
	TPL_CONTROL_RIGHT = &#x27;&lt;a href=&quot;#&quot; class=&quot;&#x27;+ concat(CSS_IMAGE_VIEWER_CONTROL, CSS_CAROUSEL_CONTROL, CSS_RIGHT) +&#x27;&quot;&gt;&amp;rsaquo;&lt;/a&gt;&#x27;,
	TPL_IMAGE = &#x27;&lt;img class=&quot;&#x27; + CSS_IMAGE_VIEWER_IMAGE + &#x27;&quot; /&gt;&#x27;,
	TPL_INFO = &#x27;&lt;h5 class=&quot;&#x27; + CSS_IMAGE_VIEWER_INFO + &#x27;&quot;&gt;&lt;/h5&gt;&#x27;,
	TPL_LOADER = &#x27;&lt;div class=&quot;&#x27; + CSS_IMAGE_VIEWER_LOADER + &#x27;&quot;&gt;&lt;/div&gt;&#x27;,
	TPL_LOADING = &#x27;&lt;div class=&quot;&#x27; + CSS_ICON_TIME + &#x27;&quot;&gt;&lt;/div&gt;&#x27;;

/**
 * A base class for ImageViewer, providing:
 * &lt;ul&gt;
 *    &lt;li&gt;Widget Lifecycle (initializer, renderUI, bindUI, syncUI, destructor)&lt;/li&gt;
 *    &lt;li&gt;Displays an image in a Overlay&lt;/li&gt;
 *    &lt;li&gt;Keyboard navigation support&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * Check the [live demo](http://alloyui.com/examples/image-viewer/).
 *
 * @class A.ImageViewer
 * @extends A.Widget
 * @uses A.WidgetStdMod, A.WidgetPosition, A.WidgetStack, A.WidgetPositionAlign,
 * A.WidgetPositionConstrain, A.WidgetModality
 * @param config {Object} Object literal specifying widget configuration properties.
 * @constructor
 */
var ImageViewer = A.Base.create(
	&#x27;aui-image-viewer&#x27;,
	A.Widget,
	[
        A.WidgetCssClass,
        A.WidgetStdMod,
        A.WidgetToggle,
        A.WidgetPosition,
        A.WidgetStack,
        A.WidgetPositionAlign,
        A.WidgetPositionConstrain,
        A.WidgetModality
    ],
	{
		/**
		 * Handler for the key events.
		 *
		 * @property _keyHandler
		 * @type EventHandler
		 * @protected
		 */
		_keyHandler: null,

		/**
		 * Create the DOM structure for the ImageViewer. Lifecycle.
		 *
		 * @method renderUI
		 * @protected
		 */
		renderUI: function() {
			var instance = this;

			instance._renderControls();
			instance._renderFooter();

			instance.get(LINKS).addClass(CSS_IMAGE_VIEWER_LINK);
		},

		/**
		 * Bind the events on the ImageViewer UI. Lifecycle.
		 *
		 * @method bindUI
		 * @protected
		 */
		bindUI: function() {
			var instance = this;
			var links = instance.get(LINKS);
			var controlLeftEl = instance.get(CONTROL_LEFT_EL);
			var controlRightEl = instance.get(CONTROL_RIGHT_EL);
			var closeEl = instance.get(CLOSE_EL);

			closeEl.on(&#x27;click&#x27;, A.bind(instance._onClickCloseEl, instance));
			controlLeftEl.on(&#x27;click&#x27;, A.bind(instance._onClickLeftControl, instance));
			controlRightEl.on(&#x27;click&#x27;, A.bind(instance._onClickRightControl, instance));
			links.on(&#x27;click&#x27;, A.bind(instance._onClickLinks, instance));

			instance._keyHandler = A.bind(instance._onKeyInteraction, instance);

			// NOTE: using keydown to avoid keyCode bug on IE
			A.getDoc().on(&#x27;keydown&#x27;, instance._keyHandler);

			instance.after(&#x27;render&#x27;, instance._afterRender);
			instance.after(&#x27;loadingChange&#x27;, instance._afterLoadingChange);
			instance.after(&#x27;visibleChange&#x27;, instance._afterVisibleChange);
		},

		/**
		 * Destructor lifecycle implementation for the ImageViewer class.
		 * Purges events attached to the node (and all child nodes).
		 *
		 * @method destructor
		 * @protected
		 */
		destructor: function() {
			var instance = this;

			var links = instance.get(LINKS);

			instance.close();

			links.detach(&#x27;click&#x27;);
			links.removeClass(CSS_IMAGE_VIEWER_LINK);

			// detach key global listener from the document
			A.getDoc().detach(&#x27;keydown&#x27;, instance._keyHandler);

			instance.get(CONTROL_LEFT_EL).remove(true);
			instance.get(CONTROL_RIGHT_EL).remove(true);
			instance.get(CLOSE_EL).remove(true);
			instance.get(LOADER).remove(true);
		},

		/**
		 * Close the ImageViewer.
		 *
		 * @method close
		 */
		close: function() {
			var instance = this;

			instance.hide();
		},

		/**
		 * Get the Node reference to the &lt;code&gt;currentIndex&lt;/code&gt; element from
		 * the &lt;a href=&quot;ImageViewer.html#config_links&quot;&gt;links&lt;/a&gt;.
		 *
		 * @method getLink
		 * @param {Number} currentIndex
		 * @return {Node}
		 */
		getLink: function(currentIndex) {
			var instance = this;

			return instance.get(LINKS).item(currentIndex);
		},

		/**
		 * Get the current loaded node link reference.
		 *
		 * @method getCurrentLink
		 * @return {Node}
		 */
		getCurrentLink: function() {
			var instance = this;

			return instance.getLink(
				instance.get(CURRENT_INDEX)
			);
		},

		/**
		 * Load an image &lt;code&gt;src&lt;/code&gt; on the ImageViewer.
		 *
		 * @method loadImage
		 * @param {String} src Image src.
		 */
		loadImage: function(src) {
			var instance = this;

			var loader = instance.get(LOADER);

			instance.set(LOADING, true);

			var activeImagePool = instance._activeImagePool;

			if (!activeImagePool) {
				activeImagePool = [];

				// creating the placeholder image
				var placeholder = instance.get(IMAGE);

				var image0 = placeholder.clone();
				var image1 = placeholder.clone();

				// bind the onLoad handler to the image, this handler should append the loaded image
				var onload = A.bind(instance._onLoadImage, instance);

				image0.on(&#x27;load&#x27;, onload);
				image1.on(&#x27;load&#x27;, onload);

				activeImagePool.push(image0, image1);

				instance._activeImagePool = activeImagePool;
			}

			var image = activeImagePool[0];

			image.removeAttribute(&#x27;height&#x27;);
			image.removeAttribute(&#x27;width&#x27;);

			image.setStyles(MAP_RESET_DIMENSIONS);

			// append the placeholder image to the loader div
			loader.append(image);

			// re-sort the pool
			activeImagePool.push(activeImagePool.shift(image));

			// set the src of the image to be loaded on the placeholder image.
			// dataURI allows cached images to refire load event in webkit, and bypass
			// the MimeType error (c/o Paul Irish &amp; Doug Jones)
			if (A.UA.webkit) {
				image.attr(SRC, &#x27;data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==&#x27;);
			}

			image.attr(SRC, src);

			instance.fire(&#x27;request&#x27;, { image: image });
		},

		/**
		 * Check if there is a node reference for the &lt;code&gt;currentIndex&lt;/code&gt;.
		 *
		 * @method hasLink
		 * @param {Number} currentIndex
		 * @return {Boolean}
		 */
		hasLink: function(currentIndex) {
			var instance = this;

			return instance.getLink(currentIndex);
		},

		/**
		 * Check if there is a next element to navigate.
		 *
		 * @method hasNext
		 * @return {Boolean}
		 */
		hasNext: function() {
			var instance = this;

			return instance.hasLink(
				instance.get(CURRENT_INDEX) + 1
			);
		},

		/**
		 * Check if there is a previous element to navigate.
		 *
		 * @method hasPrev
		 * @return {Boolean}
		 */
		hasPrev: function() {
			var instance = this;

			return instance.hasLink(
				instance.get(CURRENT_INDEX) - 1
			);
		},

		/**
		 * Hide all UI controls (i.e., arrows, close icon etc).
		 *
		 * @method hideControls
		 */
		hideControls: function() {
			var instance = this;

			instance.get(CONTROL_LEFT_EL).hide();
			instance.get(CONTROL_RIGHT_EL).hide();
			instance.get(CLOSE_EL).hide();
		},

		/**
		 * Load the next image.
		 *
		 * @method next
		 */
		next: function() {
			var instance = this;

			if (instance.hasNext()) {
				instance.set(
					CURRENT_INDEX,
					instance.get(CURRENT_INDEX) + 1
				);

				instance.show();
			}
		},

		/**
		 * Preload all images.
		 *
		 * @method preloadAllImages
		 */
		preloadAllImages: function() {
			var instance = this;

			instance.get(LINKS).each(function(link, index) {
				instance.preloadImage(index);
			});
		},

		/**
		 * Preload an image based on its &lt;code&gt;index&lt;/code&gt;.
		 *
		 * @method preloadImage
		 * @param {Number} currentIndex
		 */
		preloadImage: function(currentIndex) {
			var instance = this;
			var link = instance.getLink(currentIndex);

			if (link) {
				var src = link.attr(HREF);

				instance._createPreloadImage(src);
			}
		},

		/**
		 * Load the previous image.
		 *
		 * @method next
		 */
		prev: function() {
			var instance = this;

			if (instance.hasPrev()) {
				instance.set(
					CURRENT_INDEX,
					instance.get(CURRENT_INDEX) - 1
				);

				instance.show();
			}
		},

		/**
		 * Show the loading icon.
		 *
		 * @method showLoading
		 */
		showLoading: function() {
			var instance = this;
			var loadingEl = instance.get(LOADING_EL);

			instance.setStdModContent(BODY, loadingEl);

			loadingEl.center(instance.bodyNode);
		},

		/**
		 * Show the ImageViewer UI.
		 *
		 * @method show
		 */
		show: function() {
			var instance = this;
			var currentLink = instance.getCurrentLink();

			if (currentLink) {
				ImageViewer.superclass.show.apply(this, arguments);

				instance.loadImage(
					currentLink.attr(HREF)
				);
			}
		},

		/**
		 * Removes the references to the preload images to free up memory.
		 *
		 * @method _clearPreloadImageFn
		 * @protected
		 */
		_clearPreloadImageFn: function() {
			var instance = this;

			var preloadImagePool = instance._preloadImagePool;
			var image;

			for (var i in preloadImagePool) {
				image = preloadImagePool[i];

				if (image &amp;&amp; image.complete) {
					preloadImagePool[i] = null;
				}
			}
		},

		/**
		 * Creates the preload image instance, and add&#x27;s it
		 * to the internal pool.
		 *
		 * @method _createPreloadImage
		 * @param src
		 * @protected
		 */
		_createPreloadImage: function(src) {
			var instance = this;

			var preloadImagePool = instance._preloadImagePool;

			if (!preloadImagePool) {
				preloadImagePool = instance._preloadImagePool = {};

				instance._clearPreloadImageTask = A.debounce(instance._clearPreloadImageFn, 50, instance);
			}

			if (!(src in preloadImagePool)) {
				var image = new Image();

				image.onload = instance._clearPreloadImageTask;
				image.src = src;

				preloadImagePool[src] = image;
			}
		},

		/**
		 * Render the controls UI.
		 *
		 * @method _renderControls
		 * @protected
		 */
		_renderControls: function() {
			var instance = this;
			var body = A.one(BODY);

			body.append(
				instance.get(CONTROL_LEFT_EL).hide()
			);

			body.append(
				instance.get(CONTROL_RIGHT_EL).hide()
			);

			body.append(
				instance.get(CLOSE_EL).hide()
			);
		},

		/**
		 * Render the footer UI.
		 *
		 * @method _renderFooter
		 * @protected
		 */
		_renderFooter: function() {
			var instance = this;

			var boundingBox = instance.get(BOUNDING_BOX);

			var docFrag = boundingBox.get(OWNER_DOCUMENT).invoke(CREATE_DOCUMENT_FRAGMENT);

			docFrag.append(
				instance.get(CAPTION_EL)
			);
			docFrag.append(
				instance.get(INFO_EL)
			);

			instance.setStdModContent(
				FOOTER,
				docFrag
			);
		},

		/**
		 * Sync the caption UI.
		 *
		 * @method _syncCaptionUI
		 * @protected
		 */
		_syncCaptionUI: function() {
			var instance = this;
			var caption = instance.get(CAPTION);
			var captionEl = instance.get(CAPTION_EL);
			var captionFromTitle = instance.get(CAPTION_FROM_TITLE);

			if (captionFromTitle) {
				var currentLink = instance.getCurrentLink();

				if (currentLink) {
					var title = currentLink.attr(TITLE);

					if (title) {
						caption = currentLink.attr(TITLE);
					}
				}
			}

			captionEl.html(caption);
		},

		/**
		 * Sync the controls UI.
		 *
		 * @method _syncControlsUI
		 * @protected
		 */
		_syncControlsUI: function() {
			var instance = this;
			var boundingBox = instance.get(BOUNDING_BOX);
			var controlLeftEl = instance.get(CONTROL_LEFT_EL);
			var controlRightEl = instance.get(CONTROL_RIGHT_EL);
			var closeEl = instance.get(CLOSE_EL);

			if (instance.get(VISIBLE)) {
				if (instance.get(SHOW_CONTROLS)) {
					// get the viewportRegion to centralize the controls on the middle of the window viewport
					var viewportRegion = boundingBox.get(VIEWPORT_REGION);
					var heightRegion = Math.floor(viewportRegion.height/2) + viewportRegion.top;

					// show or hide controls based on the hasPrev/hasNext information
					controlLeftEl[ instance.hasPrev() ? SHOW : HIDE ]();
					controlRightEl[ instance.hasNext() ? SHOW : HIDE ]();

					closeEl.show();
				}
			}
			else {
				// if the overlay is not visible hide all controls
				instance.hideControls();
			}
		},

		/**
		 * Sync the ImageViewer UI.
		 *
		 * @method _syncImageViewerUI
		 * @protected
		 */
		_syncImageViewerUI: function() {
			var instance = this;

			instance._syncControlsUI();
			instance._syncCaptionUI();
			instance._syncInfoUI();
		},

		/**
		 * Sync the info UI.
		 *
		 * @method _syncInfoUI
		 * @protected
		 */
		_syncInfoUI: function() {
			var instance = this;
			var infoEl = instance.get(INFO_EL);

			infoEl.html(
				instance.get(INFO_TEMPLATE)
			);
		},

		/**
		 * Calculate the resize ratio for the loaded image.
		 *
		 * @method _getRatio
		 * @param {Number} width Image width
		 * @param {Number} height Image height
		 * @protected
		 * @return {Number}
		 */
		_getRatio: function(width, height) {
			var instance = this;

			var ratio = 1;
			var maxHeight = instance.get(MAX_HEIGHT);
			var maxWidth = instance.get(MAX_WIDTH);

			if ((height &gt; maxHeight) || (width &gt; maxWidth)) {
				var hRatio = (height / maxHeight);
				var wRatio = (width / maxWidth);

				ratio = Math.max(hRatio, wRatio);
			}

			return ratio;
		},

		/**
		 * Get the &lt;a href=&quot;ImageViewer.html#config_info&quot;&gt;info&lt;/a&gt; template.
		 *
		 * @method _getInfoTemplate
		 * @param {String} v template
		 * @protected
		 * @return {String} Parsed string.
		 */
		_getInfoTemplate: function(v) {
			var instance = this;
			var total = instance.get(TOTAL_LINKS);
			var current = instance.get(CURRENT_INDEX) + 1;

			return L.sub(v, {
				current: current,
				total: total
			});
		},

		/**
		 * Display the image once it&#x27;s been loaded.
		 *
		 * @method _displayLoadedImage
		 * @param {Node} image The loaded image
		 * @protected
		 */
		_displayLoadedImage: function(image) {
			var instance = this;

			instance._uiSetImageSize(image);

			instance.setStdModContent(BODY, image);

			instance.set(LOADING, false);

			instance._syncImageViewerUI();

			// invoke WidgetPosition _setAlignCenter to force center alignment
			instance._setAlignCenter(true);

			instance.fire(&#x27;load&#x27;, { image: image });

			if (instance.get(PRELOAD_NEIGHBOR_IMAGES)) {
				// preload neighbor images
				var currentIndex = instance.get(CURRENT_INDEX);

				instance.preloadImage(currentIndex + 1);
				instance.preloadImage(currentIndex - 1);
			}
		},

		/**
		 * Fires after the ImageViewer render phase.
		 *
		 * @method _afterRender
		 * @protected
		 */
		_afterRender: function() {
			var instance = this;
			var bodyNode = instance.bodyNode;
			var boundingBox = instance.get(BOUNDING_BOX);

			bodyNode.addClass(CSS_IMAGE_VIEWER_BD);
			boundingBox.addClass(CSS_WELL);

			if (instance.get(PRELOAD_ALL_IMAGES)) {
				instance.preloadAllImages();
			}
		},

		/**
		 * Fires after the value of the
		 * &lt;a href=&quot;ImageViewer.html#config_loading&quot;&gt;loading&lt;/a&gt; attribute change.
		 *
		 * @method _afterLoadingChange
		 * @param {EventFacade} event
		 * @protected
		 */
		_afterLoadingChange: function(event) {
			var instance = this;
			var boundingBox = instance.get(BOUNDING_BOX);

			if (event.newVal) {
				boundingBox.addClass(CSS_IMAGE_VIEWER_LOADING);

				instance.showLoading();
			}
			else{
				boundingBox.removeClass(CSS_IMAGE_VIEWER_LOADING);
			}
		},

		/**
		 * Fires after the value of the
		 * &lt;a href=&quot;ImageViewer.html#config_visible&quot;&gt;visible&lt;/a&gt; attribute change.
		 *
		 * @method _afterVisibleChange
		 * @param {EventFacade} event
		 * @protected
		 */
		_afterVisibleChange: function(event) {
			var instance = this;

			instance._syncControlsUI();
		},

		/**
		 * Fires the click event on the close icon.
		 *
		 * @method _onClickCloseEl
		 * @param {EventFacade} event click event facade
		 * @protected
		 */
		_onClickCloseEl: function(event) {
			var instance = this;

			instance.close();

			event.halt();
		},

		/**
		 * Fires the click event on the left control icon.
		 *
		 * @method _onClickLeftControl
		 * @param {EventFacade} event click event facade
		 * @protected
		 */
		_onClickLeftControl: function(event) {
			var instance = this;

			instance.prev();

			event.halt();
		},

		/**
		 * Fires the click event on the right control icon.
		 *
		 * @method _onClickRightControl
		 * @param {EventFacade} event click event facade
		 * @protected
		 */
		_onClickRightControl: function(event) {
			var instance = this;

			instance.next();

			event.halt();
		},

		/**
		 * Fires the click event on the links.
		 *
		 * @method _onClickLinks
		 * @param {EventFacade} event click event facade
		 * @protected
		 */
		_onClickLinks: function(event) {
			var instance = this;
			var target = event.currentTarget;

			// set the current currentIndex of the clicked image
			instance.set(
				CURRENT_INDEX,
				instance.get(LINKS).indexOf(target)
			);

			instance.show();

			event.preventDefault();
		},

		/**
		 * Handles the key interaction (i.e., next, prev etc).
		 *
		 * @method _onKeyInteraction
		 * @param {EventFacade} event click event facade
		 * @protected
		 */
		_onKeyInteraction: function(event) {
			var instance = this;

			if (!instance.get(VISIBLE)) {
				return false; // NOTE: return
			}

			if (event.isKey(KEY_LEFT)) {
				instance.prev();
			}
			else if (event.isKey(KEY_RIGHT)) {
				instance.next();
			}
			else if (event.isKey(KEY_ESC)) {
				instance.close();
			}
		},

		/**
		 * Fires on a image load.
		 *
		 * @method _onLoadImage
		 * @param {EventFacade} event
		 * @protected
		 */
		_onLoadImage: function(event) {
			var instance = this;
			var image = event.currentTarget;

			instance._displayLoadedImage(image);

			var imageAnim = instance.get(IMAGE_ANIM);

			if (instance.get(ANIM)) {
				image.setStyle(OPACITY, 0);

				if (!image.fx) {
					image.plug(NodeFx, imageAnim);
				}

				image.fx.on(&#x27;end&#x27;, function(info) {
					instance.fire(&#x27;anim&#x27;, { anim: info, image: image });
				});

				image.fx.stop().run();
			}
		},

		/**
		 * Set the size of the image and the overlay respecting the
		 * maxHeight/maxWidth ratio.
		 *
		 * @method _uiSetImageSize
		 * @param {HTMLImage} image Image
		 * @protected
		 */
		_uiSetImageSize: function(image) {
			var instance = this;
			var bodyNode = instance.bodyNode;
			var footerNode = instance.footerNode;
			var imageRegion = image.get(REGION);

			var ratio = instance._getRatio(
				imageRegion.width,
				imageRegion.height
			);

			var height = (imageRegion.height / ratio);
			var width = (imageRegion.width / ratio);

			image.set(OFFSET_HEIGHT, height);
			image.set(OFFSET_WIDTH, width);

			footerNode.setStyle(&#x27;width&#x27;, width + PX);

			bodyNode.setStyles({
				height: height + PX,
				width: width + PX
			});
		}
	},

	{
		/**
		 * Static property provides a string to identify the class.
		 *
		 * @property ImageViewer.NAME
		 * @type String
		 * @static
		 */
		NAME: IMAGE_VIEWER,

		/**
		 * Static property provides a string to identify the CSS prefix.
		 *
		 * @property ImageViewer.CSS_PREFIX
		 * @type String
		 * @static
		 */
		CSS_PREFIX: getCN(IMAGE_VIEWER),

		/**
		 * Static property used to define the default attribute
		 * configuration for the ImageViewer.
		 *
		 * @property ImageViewer.ATTRS
		 * @type Object
		 * @static
		 */
		ATTRS: {

			/**
			 * If &lt;code&gt;true&lt;/code&gt; the navigation is animated.
			 *
			 * @attribute anim
			 * @default true
			 * @type Boolean
			 */
			anim: {
				value: true,
				validator: isBoolean
			},

			/**
			 * The content of body.
			 *
			 * @attribute bodyContent
			 * @type String
			 */
			bodyContent: {
				value: NODE_BLANK_TEXT
			},

			/**
			 * The caption of the displayed image.
			 *
			 * @attribute caption
			 * @default &#x27;&#x27;
			 * @type String
			 */
			caption: {
				value: BLANK,
				validator: isString
			},

			/**
			 * If &lt;code&gt;true&lt;/code&gt; the &lt;a
			 * href=&quot;ImageViewer.html#config_caption&quot;&gt;caption&lt;/a&gt; will be pulled
			 * from the title DOM attribute.
			 *
			 * @attribute captionFromTitle
			 * @default true
			 * @type Boolean
			 */
			captionFromTitle: {
				value: true,
				validator: isBoolean
			},

			/**
			 * If &lt;code&gt;true&lt;/code&gt; the Overlay with the image will be positioned
			 * on the center of the viewport.
			 *
			 * @attribute centered
			 * @default true
			 * @type Boolean
			 */
			centered: {
				value: true
			},

			/**
			 * Index of the current image.
			 *
			 * @attribute currentIndex
			 * @default 0
			 * @type Number
			 */
			currentIndex: {
				value: 0,
				validator: isNumber
			},

			/**
			 * Image node element used to load the images.
			 *
			 * @attribute image
			 * @default Generated img element.
			 * @readOnly
			 * @type Node
			 */
			image: {
				readOnly: true,
				valueFn: function() {
					return A.Node.create(TPL_IMAGE);
				}
			},

			/**
			 * Configuration attributes passed to the &lt;a href=&quot;Anim.html&quot;&gt;Anim&lt;/a&gt;
			 * class.
			 *
			 * @attribute imageAnim
			 * @default Predefined &lt;a href=&quot;Anim.html&quot;&gt;Anim&lt;/a&gt; configuration.
			 * @type Object
			 */
			imageAnim: {
				value: {},
				setter: function(value) {
					return A.merge(
						{
							to: {
								opacity: 1
							},
							duration: 0.8
						},
						value
					);
				},
				validator: isObject
			},

			/**
			 * String template used to display the information.
			 *
			 * @attribute infoTemplate
			 * @default &#x27;Image {current} of {total}&#x27;
			 * @type String
			 */
			infoTemplate: {
				getter: function(v) {
					return this._getInfoTemplate(v);
				},
				value: INFO_LABEL_TEMPLATE,
				validator: isString
			},

			/**
			 * Selector or NodeList containing the links where the ImageViewer
			 * extracts the information to generate the thumbnails.
			 *
			 * @attribute links
			 * @type String | NodeList
			 */
			links: {
				setter: function(v) {
					var instance = this;

					if (isNodeList(v)) {
						return v;
					}
					else if (isString(v)) {
						return A.all(v);
					}

					return new A.NodeList([v]);
				}
			},

			/**
			 * Whether the image is during a loading state.
			 *
			 * @attribute loading
			 * @default false
			 * @type Boolean
			 */
			loading: {
				value: false,
				validator: isBoolean
			},

			/**
			 * Displays the modal the viewport. Set to &lt;code&gt;false&lt;/code&gt; to
			 * disable.
			 *
			 * @attribute modal
			 * @default true
			 * @type Boolean
			 */
			modal: {
				value: true
			},

			/**
			 * Preload all images grabbed from the &lt;a
			 * href=&quot;ImageViewer.html#config_links&quot;&gt;links&lt;/a&gt; attribute.
			 *
			 * @attribute preloadAllImages
			 * @default false
			 * @type Boolean
			 */
			preloadAllImages: {
				value: false,
				validator: isBoolean
			},

			/**
			 * Preload the neighbor image (i.e., the previous and next image based
			 * on the current load one).
			 *
			 * @attribute preloadAllImages
			 * @default false
			 * @type Boolean
			 */
			preloadNeighborImages: {
				value: true,
				validator: isBoolean
			},

			/**
			 * Show close icon control.
			 *
			 * @attribute showClose
			 * @default true
			 * @type Boolean
			 */
			showClose: {
				value: true,
				validator: isBoolean
			},

			/**
			 * Show the controls.
			 *
			 * @attribute showControls
			 * @default true
			 * @type Boolean
			 */
			showControls: {
				value: true,
				validator: isBoolean
			},

			/**
			 * Specify the tab order of elements.
			 *
			 * @attribute tabIndex
			 * @default null
			 * @type Number
			 */
			tabIndex: {
				value: null
			},

			/**
			 * Helper attribute to get the &lt;code&gt;size&lt;/code&gt; of the &lt;a
			 * href=&quot;ImageViewer.html#config_links&quot;&gt;links&lt;/a&gt; NodeList.
			 *
			 * @attribute totalLinks
			 * @default true
			 * @readOnly
			 * @type Boolean
			 */
			totalLinks: {
				readOnly: true,
				getter: function(v) {
					return this.get(LINKS).size();
				}
			},

			/**
			 * Determine if the ImageViewer should be visible or not.
			 *
			 * @attribute visible
			 * @default false
			 * @type Boolean
			 */
			visible: {
				value: false
			},

			/**
			 * Specify the stack order of elements.
			 *
			 * @attribute zIndex
			 * @default 3000
			 * @type Number
			 */
			zIndex: {
				value: 3000,
				validator: isNumber
			},

			/**
			 * The element to be used as left control.
			 *
			 * @attribute controlLeftEl
			 * @default Generated HTML div element.
			 * @readOnly
			 * @type Node
			 */
			controlLeftEl: {
				readOnly: true,
				valueFn: function() {
					return A.Node.create(TPL_CONTROL_LEFT);
				}
			},

			/**
			 * The element to be used as right control.
			 *
			 * @attribute controlRightEl
			 * @default Generated HTML div element.
			 * @readOnly
			 * @type Node
			 */
			controlRightEl: {
				readOnly: true,
				valueFn: function() {
					return A.Node.create(TPL_CONTROL_RIGHT);
				}
			},

			/**
			 * The element to be used as caption.
			 *
			 * @attribute captionEl
			 * @default Generated HTML div element.
			 * @readOnly
			 * @type Node
			 */
			captionEl: {
				readOnly: true,
				valueFn: function() {
					return A.Node.create(TPL_CAPTION);
				}
			},

			/**
			 * The element to be used as close.
			 *
			 * @attribute closeEl
			 * @default Generated HTML div element.
			 * @readOnly
			 * @type Node
			 */
			closeEl: {
				readOnly: true,
				valueFn: function() {
					return A.Node.create(TPL_CLOSE);
				}
			},

			/**
			 * The element to be used as info.
			 *
			 * @attribute infoEl
			 * @default Generated HTML div element.
			 * @readOnly
			 * @type Node
			 */
			infoEl: {
				readOnly: true,
				valueFn: function() {
					return A.Node.create(TPL_INFO);
				}
			},

			/**
			 * HTML element to house the &lt;code&gt;img&lt;/code&gt; which is being loaded.
			 *
			 * @attribute loader
			 * @default Generated HTML div element.
			 * @type Node
			 */
			loader: {
				readOnly: true,
				valueFn: function() {
					return A.Node.create(TPL_LOADER).appendTo(DOC.body);
				}
			},

			/**
			 * The element to be used as loading.
			 *
			 * @attribute loadingEl
			 * @default Generated HTML div element.
			 * @type Node
			 */
			loadingEl: {
				valueFn: function() {
					return A.Node.create(TPL_LOADING);
				}
			},

			/**
			 * The maximum height of the element
			 *
			 * @attribute maxHeight
			 * @default Infinity
			 * @type Number
			 */
			maxHeight: {
				value: Infinity,
				validator: isNumber
			},

			/**
			 * The maximum width of the element
			 *
			 * @attribute maxWidth
			 * @default Infinity
			 * @type Number
			 */
			maxWidth: {
				value: Infinity,
				validator: isNumber
			}
		}
	}
);

A.ImageViewer = ImageViewer;

    </pre>
</div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
    <script src="../assets/js/yui-prettify.js"></script>
    <script src="../assets/../api.js"></script>
    <script src="../assets/js/api-filter.js"></script>
    <script src="../assets/js/api-list.js"></script>
    <script src="../assets/js/api-search.js"></script>
    <script src="../assets/js/apidocs.js"></script>

</body>
</html>